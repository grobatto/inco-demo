<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>INCO Soluciones · Demo Agente de Leads</title>
  <meta name="description" content="Demostración en vivo del agente de leads de INCO Soluciones. Conversa, califica y captura leads automáticamente en Monday.com." />
  <style>
    :root {
      --bg: #ffffff;
      --panel: #fafafa;
      --text: #111111;
      --muted: #6e6e73;
      --border: #e6e6e6;
      --hairline: #f1f1f1;
      --primary: #0071e3; /* Apple blue */
      --primary-600: #0060c9;
      --bubble-bot: #f5f5f7;
      --bubble-user: #e8f1ff;
      --success: #34c759;
    }

    * { box-sizing: border-box; }
    body {
      margin: 0; color: var(--text); background: var(--bg);
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "SF Pro Display", system-ui, Segoe UI, Roboto, Helvetica, Arial;
      -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;
    }

    .container { max-width: 1180px; margin: 0 auto; padding: 24px; }
    header { display:flex; align-items:center; justify-content:space-between; padding:8px 0 20px; border-bottom:1px solid var(--hairline); }
    .brand { display:flex; align-items:center; gap:10px; }
    .badge { width:34px; height:34px; border-radius:9px; background: linear-gradient(180deg, #0a84ff, #6ad1ff); display:grid; place-items:center; color:#fff; font-weight:800; }
    .nav { display:flex; gap:18px; color: var(--muted); font-size:14px; }

    .hero { display:grid; grid-template-columns: 1.2fr 1fr; gap: 28px; padding: 32px 0 12px; }
    .title { font-size: clamp(32px, 5vw, 52px); letter-spacing: -0.02em; margin: 0 0 10px; font-weight: 700; }
    .subtitle { color: var(--muted); font-size: 18px; margin: 0 0 18px; }
    .bullets { display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap: 10px 16px; margin: 14px 0 18px; }
    .bullet { display:flex; gap:8px; align-items:center; color:#1d1d1f; }
    .check { width:18px; height:18px; border-radius:50%; background: var(--success); display:grid; place-items:center; color:#fff; font-size:12px; }
    .cta { display:inline-flex; align-items:center; gap:10px; background: var(--primary); color:#fff; border:0; padding: 12px 18px; border-radius:999px; font-weight:600; box-shadow:0 10px 30px rgba(0,113,227,.2); cursor:pointer; }
    .cta:hover { background: var(--primary-600); }
    .note { color: var(--muted); font-size: 13px; margin-top: 10px; }

    /* Chat panel */
    .panel { border:1px solid var(--border); border-radius:20px; overflow:hidden; background: #fff; box-shadow: 0 20px 40px rgba(0,0,0,.06); }
    .panel-head { display:flex; align-items:center; justify-content:space-between; padding: 14px 16px; background: var(--panel); border-bottom:1px solid var(--hairline); }
    .status { color: var(--muted); font-size: 13px; }
    .toolbar { display:flex; gap:8px; align-items:center; }
    .chip { background:#eef2ff; color:#2b50ff; padding: 4px 10px; border-radius:999px; font-size:12px; font-weight:700; }
    .reset { background: transparent; border:1px solid var(--border); color: var(--muted); padding: 8px 12px; border-radius: 999px; cursor: pointer; }
    .reset:hover { color:#111; }

    .chat { padding:16px; height:480px; overflow:auto; background:#fff; }
    .row { display:flex; gap:8px; margin:8px 0; }
    .row.bot { justify-content:flex-start; }
    .row.user { justify-content:flex-end; }
    .bubble { max-width:70%; padding: 10px 14px; border-radius: 16px; border:1px solid var(--border); font-size: 15px; }
    .bot .bubble { background: var(--bubble-bot); border-bottom-left-radius: 4px; }
    .user .bubble { background: var(--bubble-user); border-bottom-right-radius: 4px; }
    .typing { display:inline-flex; gap:5px; }
    .dot { width:6px; height:6px; background: var(--primary); border-radius:50%; animation: pulse 1.2s infinite; opacity:.75; }
    .dot:nth-child(2){ animation-delay:.2s }
    .dot:nth-child(3){ animation-delay:.4s }
    @keyframes pulse{ 0%,60%,100%{ transform: translateY(0) } 30%{ transform: translateY(-6px) } }
    .footer { padding: 12px; border-top:1px solid var(--hairline); display:flex; gap:10px; background:#fff; }
    input[type="text"] { flex:1; border:1px solid var(--border); border-radius:999px; padding:12px 14px; font-size:15px; }
    input[type="text"]:focus { outline:3px solid rgba(0,113,227,.15); border-color: var(--primary); }
    .send { background: var(--primary); color:#fff; border:0; border-radius:999px; padding: 10px 16px; font-weight:600; cursor:pointer; }
    .send[disabled]{ background:#c8d7ef; cursor:not-allowed; }

    /* Feature sections */
    .section { padding: 42px 0; border-top: 1px solid var(--hairline); }
    .grid { display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap:20px; }
    .feat { border:1px solid var(--border); background:#fff; border-radius:16px; padding:20px; box-shadow: 0 14px 28px rgba(0,0,0,.04); }
    .feat h3 { margin: 6px 0 8px; font-size:18px; }
    .feat p { margin:0; color: var(--muted); font-size: 15px; }
    .muted { color: var(--muted); }

    .how { display:grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap:16px; }
    .step { padding:18px; background:#fff; border:1px solid var(--border); border-radius:14px; }
    .step span { font-size:12px; color:var(--muted); }
    .step h4 { margin:6px 0 8px; font-size:16px; }
    .step p { margin:0; color:var(--muted); font-size:14px; }

    footer { text-align:center; color:var(--muted); padding: 32px 16px; }

    @media (max-width: 960px){
      .hero { grid-template-columns: 1fr; }
      .grid { grid-template-columns: 1fr; }
      .how { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="badge">I</div>
        <div>INCO Soluciones</div>
      </div>
      <nav class="nav">
        <a href="#caracteristicas" style="text-decoration:none; color:inherit;">Características</a>
        <a href="#como-funciona" style="text-decoration:none; color:inherit;">Cómo funciona</a>
        <a href="#futuro" style="text-decoration:none; color:inherit;">Próximamente</a>
        <a href="#arquitectura" style="text-decoration:none; color:inherit;">Arquitectura</a>
      </nav>
    </header>

    <section class="hero">
      <div>
        <h1 class="title">Un agente de ventas que realmente califica y captura leads</h1>
        <p class="subtitle">Conversación natural, calificación inteligente y creación automática de leads en Monday.com. Potenciado por Google Vertex AI (Gemini) y AWS Serverless.</p>
        <div class="bullets">
          <div class="bullet"><span class="check">✓</span> Conversa en español, tono consultivo</div>
          <div class="bullet"><span class="check">✓</span> Pide nombre y email de manera natural</div>
          <div class="bullet"><span class="check">✓</span> Envía el lead a Monday.com al cerrar</div>
          <div class="bullet"><span class="check">✓</span> Guarda el historial con fecha y lead</div>
        </div>
        <button class="cta" type="button" id="focusInput">Probar ahora</button>
        <div class="note">Consejo: escribe tu nombre y un email válido para ver cómo captura el lead.</div>
      </div>

      <div class="panel" aria-label="Demo de chat">
        <div class="panel-head">
          <div style="font-weight:700">Agente INCO</div>
          <div class="toolbar">
            <span class="chip">En vivo</span>
            <button class="reset" id="resetBtn" type="button">Reiniciar</button>
          </div>
        </div>
        <div class="chat" id="chat"></div>
        <div class="footer">
          <input id="msg" type="text" placeholder="Escribe tu mensaje…" aria-label="Tu mensaje" />
          <button class="send" id="sendBtn" type="button">Enviar</button>
        </div>
      </div>
    </section>

    <section id="caracteristicas" class="section">
      <div class="grid">
        <div class="feat">
          <div class="muted">01</div>
          <h3>Conversación natural</h3>
          <p>Guía al visitante, entiende su necesidad y solicita datos clave con tacto profesional.</p>
        </div>
        <div class="feat">
          <div class="muted">02</div>
          <h3>Lead listo para ventas</h3>
          <p>Cuando hay nombre + email + necesidad, crea el lead en Monday.com en segundos.</p>
        </div>
        <div class="feat">
          <div class="muted">03</div>
          <h3>Historial auditable</h3>
          <p>Guarda cada mensaje con fecha (UTC) y nombre del lead para análisis posterior.</p>
        </div>
      </div>
    </section>

    <section id="como-funciona" class="section">
      <h2 style="margin:0 0 18px; font-size:28px;">Cómo funciona</h2>
      <div class="how">
        <div class="step"><span>Paso 1</span><h4>Explora en 2 turnos</h4><p>Comprende la necesidad sin alargar la charla.</p></div>
        <div class="step"><span>Paso 2</span><h4>Recopila datos</h4><p>Pide nombre y email de a uno, validando sutilmente.</p></div>
        <div class="step"><span>Paso 3</span><h4>Cierre seguro</h4><p>Con datos completos, cierra y crea el lead en Monday.com.</p></div>
        <div class="step"><span>Paso 4</span><h4>Audita</h4><p>Consulta leads y conversaciones por `sessionId`.</p></div>
      </div>
    </section>

    <section id="arquitectura" class="section">
      <h2 style="margin:0 0 18px; font-size:28px;">Arquitectura</h2>
      <div class="feat">
        <div class="muted">Diagrama general</div>
        <pre class="mermaid">graph TB
    subgraph "Cliente Web"
        A[Usuario] --> B[Frontend HTML/JS]
        B --> C[localStorage SessionId]
    end

    subgraph "AWS Cloud"
        D[API Gateway] --> E[Lambda Chat Function]
        E --> F[Vertex AI Gemini 2.5 Flash]
        E --> G[DynamoDB Leads Table]
        E --> H[DynamoDB Conversations Table]
        E --> I[Monday.com API]
        E --> J[AWS Secrets Manager]
        
        K[Lambda GetLeads Function] --> G
        L[Lambda GetConversations Function] --> H
        
        M[API Gateway /leads] --> K
        N[API Gateway /conversations] --> L
    end
    
    subgraph "Servicios Externos"
        F --> O[Google Cloud Platform]
        I --> P[Monday.com Platform]
        J --> Q[Gemini API Key]
        J --> R[Monday API Key]
    end
    
    B -->|POST /chat| D
    B -->|GET /leads| M
    B -->|GET /conversations| N
    
    E -->|Fallback Local| S[Heurísticas Locales]
    
    style A fill:#e1f5fe
    style B fill:#e8f5e8
    style E fill:#fff3e0
    style F fill:#f3e5f5
    style G fill:#e0f2f1
    style H fill:#e0f2f1
    style I fill:#fce4ec</pre>
      </div>
    </section>

    <section id="futuro" class="section">
      <h2 style="margin:0 0 18px; font-size:28px;">Próximamente</h2>
      <div class="grid">
        <div class="feat">
          <h3>Calendly opcional</h3>
          <p>Al cerrar, podrá ofrecer un enlace de agenda por país y/o solución. Hoy está desactivado por foco en la validación de leads.</p>
        </div>
        <div class="feat">
          <h3>Panel de métricas</h3>
          <p>Embudo, tasa de cierre, respuesta media y exportaciones automáticas a S3/Athena.</p>
        </div>
        <div class="feat">
          <h3>Modelos alternativos</h3>
          <p>Switch a Gemini 2.5 Pro por variable de entorno para escenarios que requieran más razonamiento.</p>
        </div>
      </div>
    </section>

    <footer>© 2025 INCO Soluciones · Demo del Agente de Leads</footer>
  </div>

  <script>
    // Endpoint de producción
    const API_URL = 'https://zuqk1e2oo9.execute-api.us-east-1.amazonaws.com/chat';

    // Sesión persistente
    let sessionId = localStorage.getItem('inco-agent-sessionId');
    if (!sessionId) {
      sessionId = 'session-' + Date.now() + '-' + Math.random().toString(36).slice(2,9);
      localStorage.setItem('inco-agent-sessionId', sessionId);
    }

    const chatEl = document.getElementById('chat');
    const inputEl = document.getElementById('msg');
    const sendBtn = document.getElementById('sendBtn');
    const resetBtn = document.getElementById('resetBtn');
    const focusBtn = document.getElementById('focusInput');

    let busy = false;

    function addRow(text, isUser){
      const row = document.createElement('div');
      row.className = 'row ' + (isUser ? 'user' : 'bot');
      const bubble = document.createElement('div');
      bubble.className = 'bubble';
      bubble.textContent = text;
      row.appendChild(bubble);
      chatEl.appendChild(row);
      chatEl.scrollTop = chatEl.scrollHeight;
    }
    function showTyping(){
      const row = document.createElement('div');
      row.id = 'typing';
      row.className = 'row bot';
      row.innerHTML = '<div class="bubble"><span class="typing"><span class="dot"></span><span class="dot"></span><span class="dot"></span></span></div>';
      chatEl.appendChild(row); chatEl.scrollTop = chatEl.scrollHeight;
    }
    function hideTyping(){ const el = document.getElementById('typing'); if(el) el.remove(); }

    async function send(){
      const message = (inputEl.value||'').trim();
      if(!message || busy) return;
      busy = true; sendBtn.disabled = true;
      addRow(message, true); inputEl.value = '';
      showTyping();
      try{
        const res = await fetch(API_URL, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ message, sessionId }) });
        const data = await res.json().catch(()=>({ response:'Hubo un error inesperado.' }));
        hideTyping();
        const text = (data && data.response) ? data.response : 'Hubo un problema de conexión.';
        addRow(text, false);
      }catch(e){
        hideTyping(); addRow('Lo siento, hubo un error de red. Intenta de nuevo.', false);
      }finally{
        busy = false; sendBtn.disabled = false; inputEl.focus();
      }
    }

    sendBtn.addEventListener('click', send);
    inputEl.addEventListener('keydown', (ev)=>{ if(ev.key==='Enter') send(); });
    focusBtn.addEventListener('click', ()=> inputEl.focus());
    resetBtn.addEventListener('click', ()=>{
      localStorage.removeItem('inco-agent-sessionId');
      sessionId = 'session-' + Date.now() + '-' + Math.random().toString(36).slice(2,9);
      localStorage.setItem('inco-agent-sessionId', sessionId);
      chatEl.innerHTML = '';
      addRow('¡Hola! Soy el asistente de INCO Soluciones. ¿En qué puedo ayudarte hoy?', false);
      inputEl.focus();
    });

    // Mensaje inicial
    addRow('¡Hola! Soy el asistente de INCO Soluciones. ¿En qué puedo ayudarte hoy?', false);
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <script>mermaid.initialize({ startOnLoad: true, theme: 'default' });</script>
</body>
</html>


